<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles/style.css">
  <title>Calculator</title>
</head>
<body>
  
<div class="container">

  <div class="calc">
    <div class="display">
      <p></p>
    </div>
    
    <div class="clear">
      <p>AC</p>
    </div>
    
    <div class="plusminus">
      <p>+/-</p>
    </div>
    
    <div class="percentage">
      <p>%</p>
    </div>
    
    <div class="divide operatorButtons">
      <p>/</p>
    </div>

    <div class="seven numPadButtons">
      <p>7</p>
    </div>

    <div class="eight numPadButtons">
      <p>8</p>
    </div>

    <div class="nine numPadButtons">
      <p>9</p>
    </div>

    <div class="multiply operatorButtons">
      <p>x</p>
    </div>

    <div class="four numPadButtons">
      <p>4</p>
    </div>

    <div class="five numPadButtons">
      <p>5</p>
    </div>

    <div class="six numPadButtons">
      <p>6</p>
    </div>
  
    <div class="subtract operatorButtons">
      <p>-</p>
    </div>
    
    <div class="one numPadButtons">
      <p>1</p>
    </div>

    <div class="two numPadButtons">
      <p>2</p>
    </div>

    <div class="three numPadButtons">
      <p>3</p>
    </div>

    <div class="add operatorButtons">
      <p>+</p>
    </div>
    
    <div class="zero numPadButtons">
      <p>0</p>
    </div>

    <div class="decimal numPadButtons">
      <p>.</p>
    </div>

    <div class="equals operatorButtons">
      <p>=</p>
    </div>
  </div>

</div>


<script>

let add = (a, b) => parseInt(a) + parseInt(b)
let subtract = (a, b) => parseInt(a) - parseInt(b)
let divide = (a, b) => parseInt(a) / parseInt(b)
let multiply = (a, b) => parseInt(a) * parseInt(b)
let operate = (func, a, b) => func(a, b)

let memory = {
    collector: undefined,
    a: undefined,
    operator: undefined,
    b: undefined,
    total: undefined,
}

// Targets
let screen = document.querySelector('.display p')

let updateMemory = (num) => {
  // #TODO - Fix adding multiple leading Zeros issue
  // IF OPERATOR,
  if (memory.operator != undefined && 
      memory.a != undefined && 
      memory.b == undefined &&
      memory.collector != undefined) {
    memory.collector = memory.collector.concat(num)
    return memory.collector 
    
  } else if (memory.operator != undefined && 
      memory.a != undefined && 
      memory.b == undefined) {
    memory.collector = num
    return memory.collector
    
    // START - NO DATA YET 
  } else if (memory.collector == undefined && memory.operator == undefined) {
    memory.collector = num
    return memory.collector
  // PRIOR TO OPERATOR, COUPLE NUMBERS
  } else if (memory.collector != undefined && memory.operator == undefined) {
    memory.collector = memory.collector.concat(num)
    return memory.collector
  // First number entered and operator entered   
  } else if (memory.operator != undefined && memory.a != undefined) {
    memory.b = memory.collector
    return memory.b
  } else if (memory.operator != undefined && memory.a != undefined) {
    memory.collector = memory.collector.concat(num)
    return memory.collector
  }
} 

let btnClear = document.querySelector('.clear')
  .addEventListener('click', function() {
  screen.innerText = ""
  // clear memory
  memory.collector = undefined;
  memory.operator = undefined;
  memory.a = undefined;
  memory.b = undefined;
  });

let btnZero = document.querySelector('.zero')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("0"))

let btnOne = document.querySelector('.one')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("1"))

let btnTwo = document.querySelector('.two')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("2"))

let btnThree = document.querySelector('.three')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("3"))

let btnFour = document.querySelector('.four')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("4"))

let btnFive = document.querySelector('.five')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("5"))

let btnSix = document.querySelector('.six')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("6"))

let btnSeven = document.querySelector('.seven')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("7"))

let btnEight = document.querySelector('.eight')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("8"))

let btnNine = document.querySelector('.nine')
  .addEventListener('click', () =>
  screen.innerText = updateMemory("9"))

// OPERATORS
let operatorDivide = document.querySelector('.divide')
  .addEventListener('click', function () {
       // ALLOW computation with operator (instead of equals)
    if (memory.collector != undefined && memory.a !== undefined && memory.b == undefined) {
      memory.a = divide(memory.a, memory.collector)
      memory.collector = '';
      screen.innerText = memory.a
    } else if (memory.a == undefined && memory.b == undefined && memory.total != undefined) {
      memory.a = memory.total;
      memory.operator = "divide";
      memory.collector = '';
    } else {
      memory.a = memory.collector;
      memory.operator = "divide"
      memory.collector = '';
  }
});
  
let operatorMultiply = document.querySelector('.multiply')
  .addEventListener('click', function () {
        // ALLOW computation with operator (instead of equals)
    if (memory.collector != undefined && memory.a !== undefined && memory.b == undefined) {
      memory.a = multiply(memory.a, memory.collector)
      memory.collector = '';
      screen.innerText = memory.a
    } else if (memory.a == undefined && memory.b == undefined && memory.total != undefined) {
      memory.a = memory.total;
      memory.operator = "multiply";
      memory.collector = '';
    } else {
    memory.a = memory.collector;
    memory.operator = "multiply"
    memory.collector = '';
    }
});

let operatorSubtract = document.querySelector('.subtract')
  .addEventListener('click', function () {
        // ALLOW computation with operator (instead of equals)
    if (memory.collector != undefined && memory.a !== undefined && memory.b == undefined) {
      memory.a = subtract(memory.a, memory.collector)
      memory.collector = '';
      screen.innerText = memory.a
    } else if (memory.a == undefined && memory.b == undefined && memory.total != undefined) {
      memory.a = memory.total;
      memory.operator = "subtract";
      memory.collector = '';
    } else {
    memory.a = memory.collector;
    memory.operator = "subtract"
    memory.collector = '';
  }
});

let operatorAdd = document.querySelector('.add') 
  .addEventListener('click', function() {
    // ALLOW computation with operator (instead of equals)
    if (memory.collector != undefined && memory.a !== undefined && memory.b == undefined) {
      memory.a = add(memory.a, memory.collector)
      memory.collector = '';
      screen.innerText = memory.a
      // After EQUALS, allow further computation
   } else if (memory.a == undefined && memory.b == undefined && memory.total !=undefined) {
      memory.a = memory.total;
      memory.operator = "add";
      memory.collector = '';
    } else {
    memory.a = memory.collector;
    memory.operator = "add";
    memory.collector = '';
  }
});

let operatorEquals = document.querySelector('.equals')
  .addEventListener('click', function () {
    memory.b = memory.collector;
    memory.collector = undefined 
    switch (memory.operator) {
      case 'multiply':
        memory.total = multiply(memory.a, memory.b)
        screen.innerText = memory.total;
        break;
      case 'add':
        memory.total = add(memory.a, memory.b);
        screen.innerText = memory.total;
        break;
      case 'subtract':
        memory.total = subtract(memory.a, memory.b);
        screen.innerText = memory.total;
        break;
      case 'divide':
        memory.total = divide(memory.a, memory.b);
        screen.innerText = memory.total;
        break;
    }
    // clean up memory
    memory.a = undefined;
    memory.b = undefined;
    memory.operator = undefined;
  });


//let pressOperator = (value, operator) => 
//    IF (memory.a && display value) { 
//      assign operator to memory.operator
//      add display value to member b
//      process operation
//      clear memory
//    } ELSE IF (memory.a && (!display value) {
//      update memory.operator 
//    } ELSE { 
//      assign VALUE -> memory.a
//      assign OPERATOR -> memory.operator

// function pressEquals(value) {
//      assign VALUE -> memory.b
//      run operate function
//      populate display value
// }
//console.log(operate(memory.operator, memory.a, memory.b))


</script>
</body>
</html>